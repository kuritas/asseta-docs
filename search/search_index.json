{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"API/","title":"API","text":"<p>\u5bf9\u6240\u6709\u975e\u6cd5\u65b9\u5f0f\u8bf7\u6c42\uff0c\u8fd4\u56de\uff1a</p> <pre><code>{\n\"code\": -3,\n\"info\": \"Bad method\"\n}\n</code></pre> <p>\u8bf7\u6c42\u4f53\u9519\u8bef\uff0c\u8fd4\u56de\uff1a</p> <pre><code>{\n\"code\": -2,\n\"info\": \"Bad request\"\n}\n</code></pre> <p>URL \u89e3\u6790\u9519\u8bef\uff0c\u8fd4\u56de\uff1a</p> <pre><code>{\n\"code\": -1,\n\"info\": \"URL parsing error\"\n}\n</code></pre> <p>API \u5168\u90e8\u91c7\u7528 POST + json \u7684\u683c\u5f0f\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>\u5e38\u89c1\u9519\u8bef\uff1a</p> <ul> <li>token\u9a8c\u8bc1\u9519\u8bef<ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> </ul> </li> <li>username\u975e\u6cd5 [to be completed]</li> <li>\u64cd\u4f5c\u90e8\u95e8\u6811\u6839\u8282\u70b9 [\u5f53\u4f5c\u4e0d\u5b58\u5728\u90e8\u95e8]</li> </ul>"},{"location":"API/OA/","title":"OA","text":""},{"location":"API/OA/#oa","title":"OA \u98de\u4e66","text":"<p>\u6240\u6709\u5e26 token \u7684</p> <ul> <li>token \u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token \u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> </ul> <p>\u7528\u6237\u552f\u4e00\u6807\u8bc6\uff1aopen_id</p> <p>\u524d\u7aef\u5c06\u83b7\u53d6\u5230\u7684 code \u53d1\u9001\u7ed9\u540e\u7aef\uff0c</p> <p>\u7136\u540e\u540e\u7aef\u5411 <code>https://passport.feishu.cn/suite/passport/oauth/token</code> \u53d1\u9001 <code>POST</code> \u8bf7\u6c42\uff0c\u83b7\u53d6 <code>access_token</code></p> <p>\u8bf7\u6c42\u683c\u5f0f\uff1a <pre><code>{\n\"grant_type\": \"authorization_code\",\n\"client_id\": APP_ID,\n\"client_secret\": APP_SECRET,\n\"code\": code\n}\n</code></pre> \u6ce8\uff1a\u6b64\u5904\u7684 body \u7684\u683c\u5f0f\u4e3a <code>application/x-www-form-urlencoded</code>\uff0cheader \u5e94\u6709\uff1a\"Content-Type\": \"application/x-www-form-urlencoded\"\u3002</p> <p>\u7136\u540e\u540e\u7aef\u5411 <code>https://open.feishu.cn/open-apis/authen/v1/user_info</code> \u53d1\u9001 <code>GET</code> \u8bf7\u6c42\uff0c\u83b7\u53d6\u8be5\u7528\u6237\u7684\u7528\u6237\u4fe1\u606f\uff0c\u7136\u540e\u8fdb\u884c\u76f8\u5173\u64cd\u4f5c\u3002</p> <p>\u8bf7\u6c42\u683c\u5f0f\uff1a header \u4e2d\u6dfb\u52a0 \"Authorization\": \"Bearer \" + access_token\u3002</p> <p>\u98de\u4e66\u76f8\u5173 API 1 \u98de\u4e66\u76f8\u5173 API 2</p>"},{"location":"API/OA/#oalogin","title":"/oa/login","text":"<p>\u4f7f\u7528 OA \u8ba4\u8bc1\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1</p> <p><pre><code>POST\n{\n\"code\" : \"\", # user_access_token\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"token\": \"\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> \u9519\u8bef\u4fe1\u606f\uff1a\u5c06\u98de\u4e66\u7684\u9519\u8bef\u4fe1\u606f\u8fd4\u56de\u5373\u53ef\u3002</p> <ul> <li>code = 10, message = \"openid is not bound to any user\"</li> </ul>"},{"location":"API/OA/#oabinding","title":"/oa/binding","text":"<p>\u7528\u6237\u7ed1\u5b9a\u98de\u4e66\u8d26\u53f7</p> <pre><code>POST\n{\n\"token\": \"\",\n\"code\" : \"\", # user_access_token\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u4fe1\u606f\uff1a</p> <ul> <li> <p>token \u76f8\u5173\u9519\u8bef</p> </li> <li> <p>code = 10, message = \"user is bound to feishu account\"</p> </li> <li> <p>code = 11, message = \"feishu account is bound to another user\"</p> </li> <li> <p>code \u9519\u8bef\uff1a\u5c06\u98de\u4e66\u7684\u9519\u8bef\u4fe1\u606f\u8fd4\u56de\u5373\u53ef\u3002</p> </li> </ul>"},{"location":"API/OA/#oaunbinding","title":"/oa/unbinding","text":"<p>\u7528\u6237\u53d6\u6d88\u7ed1\u5b9a\u98de\u4e66\u8d26\u53f7\uff0c\u82e5\u539f\u672c\u5c31\u6ca1\u6709\u7ed1\u5b9a\uff0c\u5219\u4e0d\u64cd\u4f5c\u3002</p> <pre><code>POST\n{\n\"token\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u4fe1\u606f\uff1a</p> <p>token \u76f8\u5173\u9519\u8bef</p>"},{"location":"API/alert/","title":"Alert","text":""},{"location":"API/alert/#_1","title":"\u603b\u8ff0","text":"<p>\u5305\u542b\u4e24\u5f20\u8868\uff1a\u8b66\u544a\u8868\u548c\u8b66\u544a\u914d\u7f6e\u8868\u3002\u6bcf\u5929\u66f4\u65b0\u8d44\u4ea7\u4fe1\u606f\u540e\u5c06\u904d\u5386\u6240\u6709\u8b66\u544a\u914d\u7f6e\uff0c\u5e76\u521b\u5efa\u5bf9\u5e94\u7684\u8b66\u544a\u3002\u6ce8\u610f\uff0c\u8b66\u544a\u53ea\u4f1a\u5728\u66f4\u65b0\u8d44\u4ea7\u4fe1\u606f\u540e\u88ab\u540e\u7aef\u81ea\u52a8\u521b\u5efa\uff0c\u65e0\u6cd5\u901a\u8fc7API\u521b\u5efa\u3002\u8d44\u4ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u624b\u52a8\u5220\u9664\u8b66\u544a\uff08\u6765\u8868\u793a\u8be5\u8b66\u544a\u5df2\u89e3\u51b3/\u5ffd\u7565\uff09\u3002</p> <p>\u6bcf\u6761\u8b66\u544a\u914d\u7f6e\u5305\u542b\u6307\u5b9a\u90e8\u95e8\u3001\u8d44\u4ea7\u7c7b\u578b\u3001\u8b66\u544a\u7c7b\u578b\u548c\u4e00\u4e2a\u6570\u5b57value\u3002\u5bf9\u4e8e\u6bcf\u6761\u8b66\u544a\u914d\u7f6e\uff0c\u5f53\uff1a</p> <p>\u7ed9\u5b9a\u90e8\u95e8\uff08\u542b\u5b50\u6811\uff09\u7684\u7ed9\u5b9a\u7c7b\u578b\u8d44\u4ea7</p> <ul> <li>\"VALUE\": \u603b\u4ef7\u503c\u5c0f\u4e8e\u7b49\u4e8evalue</li> <li>\"NUM\": \u603b\u6570\u91cf\u5c0f\u4e8e\u7b49\u4e8evalue</li> <li>\"TO_RETIRE\"\uff1a\u5b58\u5728\u4e00\u4e2a\u8d44\u4ea7\u7684rest_life\u5c0f\u4e8e\u7b49\u4e8evalue</li> </ul> <p>\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0c\u5219\u521b\u5efa\u8b66\u62a5\u3002</p>"},{"location":"API/alert/#alertconfigcreate","title":"/alert/config/create","text":"<p>\u521b\u5efa\u8b66\u62a5\u914d\u7f6e</p> <p>\u6743\u9650\uff1a\u672c\u90e8\u95e8\u6216\u7956\u5148\u7684\u8d44\u4ea7\u7ba1\u7406\u5458</p> <pre><code>{\n\"token\": \"\",\n\"department_uuid\": uuid,\n\"category_uuid\": uuid,\n\"type\": \"\", //\"VALUE\", \"NUM\", \"TO_RETIRE\"\n\"value\": number // &gt;= 0\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": { \"config_uuid\": uuid }\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u90e8\u95e8\u4e0d\u5b58\u5728\u6216\u65e0\u6743\u9650\uff1a <code>code = 10, message = \"invalid department uuid\"</code></li> <li>\u7c7b\u522b\u4e0d\u5b58\u5728\uff1a <code>code = 11, message = \"invalid category\"</code></li> <li>\u975e\u6cd5\u7c7b\u522b\uff1a<code>code = 12, message = \"invalid alert type\"</code></li> <li>\u975e\u6cd5\u6570\u503c\uff1a<code>code = 13, message = \"value must be non-negative\"</code></li> </ul>"},{"location":"API/alert/#alertconfigdelete","title":"/alert/config/delete","text":"<p>\u5220\u9664\u8b66\u62a5\u914d\u7f6e</p> <p>\u6743\u9650\uff1a\u672c\u90e8\u95e8\u6216\u7956\u5148\u7684\u8d44\u4ea7\u7ba1\u7406\u5458</p> <pre><code>{\n\"token\": \"\",\n\"config_uuid\": uuid,\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u8b66\u544a\u914d\u7f6e\u4e0d\u5b58\u5728\u6216\u65e0\u6743\u9650\uff1a <code>code = 10, message = \"invalid alert config uuid\"</code></li> </ul>"},{"location":"API/alert/#alertconfiglist","title":"/alert/config/list","text":"<p>\u5217\u51fa\u6307\u5b9a\u90e8\u95e8\uff08\u4e0d\u542b\u5b50\u90e8\u95e8\uff09\u7684\u8b66\u544a</p> <p>\u6743\u9650\uff1a\u672c\u90e8\u95e8\u6216\u7956\u5148\u7684\u8d44\u4ea7\u7ba1\u7406\u5458</p> <pre><code>{\n\"token\": \"\",\n\"department_uuid\": uuid,\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": {[\n\"config_uuid\": uuid,\n\"category_uuid\": uuid,\n\"department_uuid\": uuid,\n\"type\": \"\", //\"VALUE\", \"NUM\", \"TO_RETIRE\"\n\"value\": number // &gt;= 0\n]}\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u90e8\u95e8\u4e0d\u5b58\u5728\u6216\u65e0\u6743\u9650\uff1a <code>code = 10, message = \"invalid department uuid\"</code></li> </ul>"},{"location":"API/alert/#alertdelete","title":"/alert/delete","text":"<p>\u5220\u9664\u8b66\u62a5</p> <p>\u6743\u9650\uff1a\u672c\u90e8\u95e8\u6216\u7956\u5148\u7684\u8d44\u4ea7\u7ba1\u7406\u5458</p> <pre><code>{\n\"token\": \"\",\n\"alert_uuid\": uuid,\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u8b66\u544a\u4e0d\u5b58\u5728\u6216\u65e0\u6743\u9650\uff1a <code>code = 10, message = \"invalid alert uuid\"</code></li> </ul>"},{"location":"API/alert/#alertlist","title":"/alert/list","text":"<p>\u5217\u51fa\u6307\u5b9a\u90e8\u95e8\uff08\u4e0d\u542b\u5b50\u90e8\u95e8\uff09\u7684\u8b66\u544a</p> <p>\u6743\u9650\uff1a\u672c\u90e8\u95e8\u6216\u7956\u5148\u7684\u8d44\u4ea7\u7ba1\u7406\u5458</p> <pre><code>{\n\"token\": \"\",\n\"department_uuid\": uuid,\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": {[\n\"alert_uuid\": uuid,\n\"category_uuid\": uuid,\n\"type\": \"\", //\"VALUE\", \"NUM\", \"TO_RETIRE\"\n\"value\": number // &gt;= 0\n]}\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u90e8\u95e8\u4e0d\u5b58\u5728\u6216\u65e0\u6743\u9650\uff1a <code>code = 10, message = \"invalid department uuid\"</code></li> </ul>"},{"location":"API/asset/","title":"API_assetss","text":"<ul> <li>token \u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token \u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> </ul>"},{"location":"API/asset/#assetcreate","title":"/asset/create","text":"<p>\u5bfc\u5165\u8d44\u4ea7\u3002\u901a\u8fc7\u5305\u542b \"upload_img\": True \u6765\u83b7\u53d6\u4f20\u56fe\u94fe\u63a5\u3002\u8fd9\u4e2a url \u5fc5\u987b\u901a\u8fc7 put \u8bbf\u95ee\uff0c10\u5206\u949f\u8fc7\u671f\u3002\u5fc5\u987b\u8981\u5728header\u91cc\u5305\u542b 'Content-Type': 'image/jpeg'\u3002</p> <p>\u4fdd\u8d28\u671f\u5355\u4f4d\u4e3a\u300c\u5929\u300d\u3002\u6240\u6709\u4ef7\u683c\u5168\u90e8\u7cbe\u786e\u5230\u6574\u6570\uff0c\u524d\u7aef\u53ef\u4ee5\u8003\u8651\u7cbe\u786e\u5230 0.1 \u5206\uff08\u4e5f\u5c31\u662f\u628a\u7528\u6237\u8f93\u5165\u6570\u5b57\u4e58 1000\uff09 \u3002</p> <p>\u6743\u9650\uff1aassetadmin \u6743\u9650\u8303\u56f4\u4e3a\u5b50\u6811\uff0csuperadmin/useradmin \u6ca1\u6709\u6743\u9650</p> <pre><code>{\n\"token\": \"\",\n\"asset_list\": [\n{\n\"name\": \"\", // 0 &lt; len &lt;= 32\n\"description\": \"\", // optional, default is \"\", 0 &lt;= len &lt;= 1024\n\"department_uuid\": \"\",\n\"category_uuid\": \"\",\n\"children\": [\n{\n\"name\": \"\", // 0 &lt; len &lt;= 32\n\"description\": \"\", // optional, default is \"\", 0 &lt;= len &lt;= 1024\n\"department_uuid\": \"\", // must the same as father's department\n\"category_uuid\": \"\",\n\"children\": [], // empty\n\"is_distinct\": boolean,\n\"count\": number,\n\"value\": number, // positive, &lt;= 2147483647, optional, default is 0\n\"lifespan\": number, // positive, &lt;= 2147483647, optional, default is inherit\n}\n],\n\"is_distinct\": boolean,\n\"count\": number, // non-negative integer, optional, default is 1, \n// must not exceed 1 when is_distinct is True\n\"value\": number, // positive, &lt;= 2147483647\n\"lifespan\": number, // positive, &lt;= 2147483647\n\"upload_img\": boolean, // optional; if True, return contains upload url\n}\n]\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"assets\": [{ // list of successfully created assets\n\"uuid\": \"\",\n\"url\": \"\" // upload url, is nonempty only when corresponding upload_img is True\n}]\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u90e8\u95e8\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid department\"</code></li> <li>\u7c7b\u522b\u4e0d\u5b58\u5728\uff1a <code>code = 11, message = \"invalid category\"</code></li> <li>\u5b50\u8d44\u4ea7\u548c\u7236\u8d44\u4ea7\u90e8\u95e8\u4e0d\u540c\uff1a<code>code = 30, message = \"different departments between parent&amp;child\"</code></li> <li>\u6570\u91cf\u578b\u8d44\u4ea7\u5efa\u6811\uff1a<code>code = 31, message = \"build tree on non-distinct asset\"</code></li> </ul>"},{"location":"API/asset/#assetmodify","title":"/asset/modify","text":"<p>\u4fee\u6539\u6307\u5b9a\u7684\u8d44\u4ea7\uff0c\u53ea\u80fd\u4fee\u6539\u4e0b\u9762\u5217\u51fa\u7684\u5b57\u6bb5\u3002\u5982\u679c\u4e00\u4e2a\u5b57\u6bb5\u4e0d\u9700\u8981\u4fee\u6539\uff0c\u5c31\u4e0d\u8981\u4f20\u5165\u8fd9\u4e2a\u5b57\u6bb5\u3002</p> <p>\u53ea\u80fd\u4fee\u6539\u7a7a\u95f2\u8d44\u4ea7\uff0c\u4fee\u6539\u4f1a\u4f7f\u5f97\u6240\u6709\u76f8\u5173\u5f85\u5ba1\u6279\u5de5\u5355\u5931\u6548\uff08\u526f\u4f5c\u7528\uff01\uff09\u3002</p> <p>upload_img \u4e3a True \u65f6\uff0c\u4f1a\u8fd4\u56de url\u3002\u8fd9\u4e2a url \u5fc5\u987b\u901a\u8fc7 put \u8bbf\u95ee\uff0c10\u5206\u949f\u8fc7\u671f\u3002\u5fc5\u987b\u8981\u5728header\u91cc\u5305\u542b 'Content-Type': 'image/jpeg'\u3002</p> <p>\u6743\u9650\uff1aassetadmin \u6743\u9650\u8303\u56f4\u4e3a\u5b50\u6811\uff0csuperadmin/useradmin \u6ca1\u6709\u6743\u9650</p> <pre><code>{\n\"token\": \"\",\n\"asset_uuid\": \"\",\n// every field below is optional, not given means no change\n\"name\": \"\", // 0 &lt; len &lt;= 32\n\"description\": \"\", // 0 &lt;= len &lt;= 1024\n\"category_uuid\": \"\",\n\"parent_uuid\": \"\", // \"\" to make root, not given to keep the same\n\"count\": number, // 1-32768\n\"value\": value,  // positive, &lt;= 2147483647\n\"upload_img\": boolean,\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message,\n\"url\": \"\" // exists only when upload_img is True\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>asset_uuid \u672c\u8d44\u4ea7\u4e0d\u5b58\u5728\uff08\u5305\u62ec\u8d44\u4ea7\u4e0d\u53ef\u89c1\uff09\uff1a <code>code = 10, message = \"invalid asset_uuid\"</code></li> <li>\u7c7b\u522b\u4e0d\u5b58\u5728\uff1a <code>code = 11, message = \"invalid category\"</code></li> <li>parent_uuid \u7236\u8d44\u4ea7\u4e0d\u5b58\u5728\uff08\u5305\u62ec\u8d44\u4ea7\u4e0d\u53ef\u89c1\uff09\uff1a <code>code = 12, message = \"invalid parent_uuid\"</code></li> <li>\u6570\u91cf\u6216\u4ef7\u503c\u975e\u6cd5\uff1a <code>code = 13, message = \"invalid count or value\"</code></li> <li>\u7236\u8d44\u4ea7\u56de\u73af\uff08\u7236\u8d44\u4ea7\u662f\u81ea\u5df1\uff0c\u6216\u8005\u662f\u5b59\u5b50\uff09\uff1a<code>code = 30, message = \"making loop\"</code></li> <li>\u53ea\u80fd\u4fee\u6539\u7a7a\u95f2\u8d44\u4ea7\uff1a <code>code = 31, message = \"asset is not idle\"</code></li> <li>\u5b50\u8d44\u4ea7\u548c\u7236\u8d44\u4ea7\u90e8\u95e8\u4e0d\u540c\uff1a<code>code = 32, message = \"different departments between parent&amp;child\"</code></li> <li>\u7236\u4e0d\u4e3a\u7a7a\uff0c\u4e14\u81ea\u5df1\u6216\u7236\u4eb2\u4e3a\u975edistinct\uff1a<code>code = 33, message = \"build tree on non-distinct asset\"</code></li> </ul>"},{"location":"API/asset/#assetsearch","title":"/asset/search","text":"<p>\u67e5\u8be2\u8d44\u4ea7\u5217\u8868</p> <p>\u6743\u9650\uff1a\u4ec5\u9650\u672c\u4e1a\u52a1\u5b9e\u4f53</p> <pre><code>{\n\"token\": \"\",\n\"filter\": { // optional\n\"category_uuid\": \"\",\n\"asset_name_contains\": \"\", // \u641c\u5b50\u4e32\n\"status\": \"\",\n\"username\": \"\"\n},\n\"numberperpage\": number, // optional, None for 50, Max = 50\n\"pagenumber\": number // optional, None for 1\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"num_pages\": number,\n\"num_items\": number,\n\"data\": [\n{\n\"uuid\": \"\",\n\"name\": \"\",\n\"status\": \"\", // [\"IDLE\", \"IN_USE\", \"IN_MAINTAIN\", \"RETIRED\", \"DELETED\"]\n\"username\": \"\",\n\"department_name\": \"\",\n\"department_uuid\": \"\",\n\"category_name\": \"\",\n\"category_uuid\": \"\",\n\"total_value\": number, \"current_value\": number,\n\"lifespan\": number, \"rest_life\": number,\n\"is_distinct\": bool,\n\"count\": number\n}\n]\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u7c7b\u522b\u4e0d\u5b58\u5728\uff1a <code>code = 11, message = \"invalid category\"</code></li> </ul>"},{"location":"API/asset/#assetinfo","title":"/asset/info","text":"<p>\u67e5\u8be2\u8d44\u4ea7\u8be6\u7ec6\u4fe1\u606f\u3002\u5f53 include_img \u4e3a True \u65f6\uff0c\u8fd4\u56de\u7684 url \u53ef\u4ee5\u8bbf\u95ee\u6587\u4ef6\uff0c10\u5206\u949f\u8fc7\u671f\u3002\u5982\u679c\u56fe\u7247\u4e0d\u5b58\u5728\uff0c\u672c\u51fd\u6570\u4e0d\u4f1a\u62a5\u9519\uff0c\u4f46\u662f\u8fd4\u56de\u7684 url \u4f1a\u7ed9 404 not found\u3002</p> <p>\u6743\u9650\uff1a\u4ec5\u9650\u672c\u4e1a\u52a1\u5b9e\u4f53</p> <pre><code>{\n\"token\": \"\",\n\"asset_uuid\": \"\",\n\"include_img\": boolean // optional, default is False\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": {\n\"name\": \"\",\n\"description\": \"\",\n\"username\": \"\", // \u6302\u8d26\u4eba\n\"status\": \"\", // [\"IDLE\", \"IN_USE\", \"IN_MAINTAIN\", \"RETIRED\", \"DELETED\"]\n\"department_uuids\": [\"\"],   // from company\n\"department_names\": [\"\"],   // from company\n\"category_uuids\": [\"\"],     // from dummy\n\"category_names\": [\"\"],     // from dummy\n\"total_value\": number, \"current_value\": number,\n\"lifespan\": number, \"rest_life\": number,\n\"is_distinct\": boolean,\n\"count\": number,\n\"father_uuid\": \"\", // return \"\" if no father\n\"father_name\": \"\", // return \"\" if no father\n\"children\": [ // \u6240\u6709\u7684\u9644\u5c5e\u8d44\u4ea7\n{\n\"uuid\": \"\",\n\"name\": \"\",\n}\n],\n\"img_url\": \"\", // exists only when include_img is True\n}\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre>"},{"location":"API/asset/#assetretire","title":"/asset/retire","text":"<p>\u8d44\u4ea7\u6e05\u9000</p> <p>\u8d44\u4ea7\u72b6\u6001\u53d8\u4e3a RETIRED\uff0c\u76f4\u63a5\u5b50\u8d44\u4ea7\u7684\u7236\u4eb2\u53d8\u4e3a\u7a7a\u3002</p> <p>\u6e05\u9000\u7684\u8d44\u4ea7\u4e0d\u80fd\u5904\u4e8e RETIRED / DELETED \u72b6\u6001\u3002</p> <p>\u6743\u9650\uff1a\u8d44\u4ea7\u7ba1\u7406\u5458\uff0c\u4e14\u5e76\u4e14\u8d44\u4ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u7ba1\u7406\u8d44\u4ea7\u3002</p> <pre><code>{\n\"token\": \"\",\n\"asset_uuid_list\": [\n\"\",\n],\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"success_list\": [\n\"\",\n],\n\"fail_list\": [\n\"\",\n],//No access or has retired or deleted\n}\nFault\n{\n\"code\": *,\n\"info\": message,\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a\u5982\u679c\u7528\u6237\u662f\u8d44\u4ea7\u7ba1\u7406\u5458\uff0c\u90a3\u4e48\u4e0d\u4f1a\u6709\u9519\u8bef\u3002\u672a\u6210\u529f\u7684uuid\u5c06\u88ab\u653e\u5165fail_list</p>"},{"location":"API/asset/#assetstatistic","title":"/asset/statistic","text":"<p>\u6743\u9650\uff1a\u8d44\u4ea7\u7ba1\u7406\u5458\uff0c\u4e14\u6307\u5b9a\u7684\u90e8\u95e8\u9700\u8981\u5728\u5176\u5b50\u6811\u4e2d</p> <pre><code>{\n\"token\": \"\",\n\"department_uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": {\n\"total_num\": number, //\u8d44\u4ea7\u603b\u6570\n\"total_value\": number, //\u8d44\u4ea7\u603b\u4ef7\u503c\n\"status_info\": [\n{\n\"status\": [\"IDLE\", \"IN_USE\", \"IN_MAINTAIN\"],\n\"total_num\": number,\n\"total_value\": number,\n}\n], // \u5171\u6709 3 \u9879\uff0c\u5206\u522b\u662f IDLE IN_USE IN_MAINTAIN \u7684\u8d44\u4ea7\u4fe1\u606f\n\"subdepartment_info\":[\n{\n\"department_uuid\": uuid, \"department_name\": \"\",\n\"total_num\": number,\n\"total_value\": number,\n}\n],\n\"history\":[\n{\n\"date\": date,\n\"total_value\": number\n}\n]\n}\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u4e0d\u5b58\u5728\u6216\u6ca1\u6709\u6743\u9650\u7684\u90e8\u95e8\uff1a<code>code = 10, message = \"invalid department uuid\"</code></li> <li>\u4e0d\u5b58\u5728\u7684\u72b6\u6001\uff1a<code>code = 11, message = \"invalid status\"</code></li> </ul> <p>#### /asset/transfer</p> <p>\u5b50\u7ea7\u8d44\u4ea7\u66f4\u6362\u7236\u4eb2\uff08\u53ea\u80fd\u4ece\u4e00\u4e2a\u8d44\u4ea7\u7684\u9644\u5c5e\u8d44\u4ea7\u53d8\u4e3a\u53e6\u4e00\u4e2a\u8d44\u4ea7\u7684\u9644\u5c5e\u8d44\u4ea7\uff09\u3002</p> <p>\u6743\u9650\uff1a\u4ec5\u9650\u672c\u4e1a\u52a1\u5b9e\u4f53\u3002</p> <pre><code>{\n    \"token\": \"\",\n    \"source_uuid\": \"\", // \u5f85\u8f6c\u79fb\u8d44\u4ea7 uuid\n    \"target_uuid\": \"\"  // \u8f6c\u79fb\u5230\u7684\u7236\u8d44\u4ea7\u7684 uuid\n}\nSuccess\n{\n    \"code\": 0,\n    \"info\": \"Succeed\"\n}\nFault\n{\n    \"code\": *,\n    \"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>uuid \u65e0\u6548\uff0c\u5305\u62ec\u67e5\u8be2\u5230\u975e\u672c\u4e1a\u52a1\u5b9e\u4f53\u8d44\u4ea7\uff1a<code>code = 10, message = \"invalid asset uuid\"</code></li> <li>\u5f85\u8f6c\u79fb\u8d44\u4ea7\u4e0d\u662f\u5b50\u7ea7\u8d44\u4ea7\uff0c\u6216\u76ee\u6807\u8d44\u4ea7\u4e0d\u662f\u7236\u7ea7\u8d44\u4ea7\uff1a<code>code = 11, message = \"invalid source or target asset\"</code></li> </ul> <p>#### /asset/setstatus</p> <p>\u8d44\u4ea7\u7ba1\u7406\u5458\u4fee\u6539\u8d44\u4ea7\u7684\u72b6\u6001</p> <p>\u6743\u9650\uff1a\u5f53\u524d\u90e8\u95e8\u7684\u8d44\u4ea7\u7ba1\u7406\u5458</p> <p>\u82e5\u76f8\u5173\u5b57\u6bb5\u4e0d\u5b58\u5728\u610f\u5473\u4e0d\u8fdb\u884c\u4fee\u6539</p> <pre><code>{\n\"token\": \"\",\n\"asset_uuid\": \"\",\n\"status\": \"\", // [\"IDLE\", \"IN_USE\", \"IN_MAINTAIN\", \"RETIRED\", \"DELETED\"] IDLE means set user=null  ontional\n}\nSuccess\n{\n\"code\": 0,\n\"info\": message\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u6743\u9650\u4e0d\u8db3\uff0c\u81ea\u5df1\u975e\u8d44\u4ea7\u7ba1\u7406\u5458\u6216\u8005\u8d44\u4ea7\u4e0d\u5c5e\u4e8e\u5f53\u524d\u90e8\u95e8\uff1a <code>code = 3, message = \"no access\"</code></li> <li>uuid \u65e0\u6548\uff1a<code>code = 10, message = \"invalid asset uuid\"</code></li> </ul>"},{"location":"API/category/","title":"Category","text":""},{"location":"API/category/#api","title":"API","text":"<p>category\u662f\u4e00\u4e2a\u68ee\u6797\uff0c\u6bcf\u4e2a\u516c\u53f8\u90fd\u6709\u81ea\u5df1\u7684\u6839\u8282\u70b9\uff0c\u6bcf\u4e2a\u516c\u53f8\u6839\u8282\u70b9\u7684\u540d\u5b57\u90fd\u662fdummy\uff0c\u4f46\u662fuuid\u4e0d\u540c\u3002dummy\u4e0d\u80fd\u5220\u6539\u3002\u4e0d\u5b58\u5728\u8d85\u7ea7\u6839\u3002</p> <p>\u7c7b\u522b\u5bf9\u516c\u53f8\u6240\u6709\u5458\u5de5\u5c55\u793a\uff0c\u4f46\u662f\u4e0d\u8de8\u516c\u53f8\u5c55\u793a\u3002\u8d44\u4ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u521b\u5efa\u7c7b\u522b\uff0c\u4f46\u662f\u4e0d\u80fd\u91cd\u547d\u540d\u3001\u5220\u9664\u7c7b\u522b\uff08\u4e00\u4e2a\u4f8b\u5916\u662f\uff0c\u7c7b\u522b\u7684\u4e0a\u4e00\u6b21\u4fee\u6539\u8005\u662f\u81ea\u5df1\uff09\u3002\u6302\u5728\u6839\u8282\u70b9\u7684\u8d44\u4ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u5220\u9664\u3001\u91cd\u547d\u540d\u4efb\u4f55\u7c7b\u522b\u3002\u5220\u9664\u7c7b\u522b\u8981\u6c42\u7c7b\u522b\u4e0b\u6ca1\u6709\u5b50\u7c7b\u522b\uff0c\u4e5f\u6ca1\u6709\u8d44\u4ea7\u3002</p> <p>\u6bcf\u6b21\u521b\u5efa/\u91cd\u547d\u540d\uff0c\u4f1a\u6539\u53d8\u8d44\u4ea7\u7684\u201c\u4e0a\u6b21\u4fee\u6539\u4eba\u201d\u548c\u201c\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4\u201d\u3002</p> <p>\u3010\u524d\u7aef\u3011dummy\u4e0d\u5bf9\u7528\u6237\u5c55\u793a\uff0c\u6302\u5728dummy\u7684\u8d44\u4ea7/\u7c7b\u522b\u76f4\u63a5\u51fa\u73b0\u5728\u6839\u76ee\u5f55\u3002</p> <p>\u3010\u540e\u7aef\u3011\u7531\u4e8e\u65e0\u6cd5\u4e3a\u6bcf\u4e2a\u516c\u53f8\u5efa\u7acbdummy\uff0c\u6211\u4eec\u4f1a\u5728\u4e00\u65e6\u6d89\u53ca\u5230dummy\u7684\u65f6\u5019\uff0c\u81ea\u52a8\u521b\u5efa\u4e00\u4e2adummy\uff0c\u5047\u88c5\u5b83\u4e00\u76f4\u5b58\u5728\u3002</p> <p>\u8d85\u7ba1\u7531\u4e8e\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u516c\u53f8\uff0c\u4ec0\u4e48\u90fd\u770b\u4e0d\u5230\uff0c\u4ec0\u4e48\u90fd\u4e0d\u80fd\u505a\u3002</p>"},{"location":"API/category/#general","title":"general","text":"<pre><code>Fault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u6240\u6709\u57fa\u4e8e\u7528\u6237token\u7684\u8bf7\u6c42\uff0c\u90fd\u9075\u5faa\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> </ul>"},{"location":"API/category/#categorycreate","title":"/category/create","text":"<p>\u521b\u5efa\u7c7b\u522b\u3002</p> <p>\u6743\u9650\uff1a\u516c\u53f8\u7684\u8d44\u4ea7\u7ba1\u7406\u5458</p> <pre><code>{\n\"token\": \"\",\n\"name\": \"\",\n\"father_uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"uuid\": \"\",\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u6743\u9650\u4e0d\u8db3\uff08\u5305\u62ec\u8d85\u7ba1\uff09\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7236\u7c7b\u522b\u4e0d\u5b58\u5728\uff08\u5305\u62ec\u7236\u7c7b\u522b\u662f\u522b\u7684\u516c\u53f8\u7684\uff09\uff1a <code>code = 10, message = \"no such father\"</code></li> </ul>"},{"location":"API/category/#categoryrename","title":"/category/rename","text":"<p>\u91cd\u547d\u540d\u7c7b\u522b\u3002</p> <p>\u6743\u9650\uff1a\u516c\u53f8\u7684\u6839\u8d44\u4ea7\u7ba1\u7406\u5458\uff1b\u666e\u901a\u8d44\u4ea7\u7ba1\u7406\u5458\uff0c\u4e14\u4e0a\u6b21\u4fee\u6539\u8005\u662f\u81ea\u5df1</p> <pre><code>{\n\"token\": \"\",\n\"new_name\": \"\",\n\"uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u6743\u9650\u4e0d\u8db3\uff08\u5305\u62ec\u8d85\u7ba1\uff09\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7c7b\u522b\u4e0d\u5b58\u5728\uff08\u5305\u62ec\u7c7b\u522b\u662f\u522b\u7684\u516c\u53f8\u7684\uff09\uff1a <code>code = 10, message = \"no such category\"</code></li> <li>\u64cd\u4f5cdummy\uff1a<code>code = 20, message=\"dont touch dummy\"</code></li> </ul>"},{"location":"API/category/#categorydelete","title":"/category/delete","text":"<p>\u5220\u9664\u7c7b\u522b\uff0c\u8981\u6c42\u6ca1\u6709\u5b50\u7c7b\u522b\u4e5f\u6ca1\u6709\u8d44\u4ea7\u3002</p> <p>\u6743\u9650\uff1a\u516c\u53f8\u7684\u6839\u8d44\u4ea7\u7ba1\u7406\u5458\uff1b\u666e\u901a\u8d44\u4ea7\u7ba1\u7406\u5458\uff0c\u4e14\u4e0a\u6b21\u4fee\u6539\u8005\u662f\u81ea\u5df1\u3002</p> <pre><code>{\n\"token\": \"\",\n\"uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u6743\u9650\u4e0d\u8db3\uff08\u5305\u62ec\u8d85\u7ba1\uff09\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7c7b\u522b\u4e0d\u5b58\u5728\uff08\u5305\u62ec\u7c7b\u522b\u662f\u522b\u7684\u516c\u53f8\u7684\uff09\uff1a <code>code = 10, message = \"no such category\"</code></li> <li>\u7c7b\u522b\u4e0b\u6709\u5b50\u7c7b\u522b\uff1a<code>code = 11, message = \"category has children\"</code></li> <li>\u7c7b\u522b\u4e0b\u6709\u8d44\u4ea7\uff1a<code>code = 12, message = \"category has assets\"</code></li> <li>\u64cd\u4f5cdummy\uff1a<code>code = 20, message=\"dont touch dummy\"</code></li> </ul>"},{"location":"API/category/#categoryqueryall","title":"/category/queryall","text":"<p>\u67e5\u8be2\u516c\u53f8\u7684\u7c7b\u522b\u6811\u3002\uff08\u5982\u679c\u6570\u636e\u5e93\u8fd8\u6ca1\u6709dummy\uff0c\u540e\u7aef\u4f1a\u7acb\u523b\u521b\u5efadummy\uff09</p> <p>\u6743\u9650\uff1a\u516c\u53f8\u6240\u6709\u5458\u5de5\u3002</p> <pre><code>{\n\"token\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": [ # list of categories\n{\n\"name\": \"\",\n\"uuid\": \"\",\n\"father_uuid\": \"\",  # dummy's father_uuid = \"\"\n\"created_by\": \"username\",\n\"created_at\": \"time\", # \u6807\u51c6\u683c\u5f0f\uff0c\u5982\"2009-06-15T13:45:30\"\uff0cUTC\u65f6\u533a\n}\n]\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u8d85\u7ba1\u7684\u8bf7\u6c42\uff1a<code>code = 4, message = \"super admin has no company\"</code></li> </ul>"},{"location":"API/company/","title":"Company","text":""},{"location":"API/company/#companycreate","title":"/company/create","text":"<p>\u65b0\u5efa\u4e1a\u52a1\u5b9e\u4f53</p> <p>\u9700\u6c42\u6743\u9650  admin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"name\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"uuid\": \"\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> </ul>"},{"location":"API/company/#companydelete","title":"/company/delete","text":"<p>\u5220\u9664\u4e1a\u52a1\u5b9e\u4f53</p> <p>\u9700\u6c42\u6743\u9650 superadmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"company_uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u4e1a\u52a1\u5b9e\u4f53\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid uuid\"</code></li> <li>\u975e\u7a7a\u4e1a\u52a1\u5b9e\u4f53\uff1a<code>code = 11, message = \"not empty company\"</code></li> </ul>"},{"location":"API/company/#companyrename","title":"/company/rename","text":"<p>\u4fee\u6539\u4e1a\u52a1\u5b9e\u4f53\u540d\u5b57</p> <p>\u9700\u6c42\u6743\u9650\uff1asuperadmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"uuid\": \"\",\n\"new_name\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u4e1a\u52a1\u5b9e\u4f53\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid uuid\"</code></li> </ul>"},{"location":"API/company/#companylist","title":"/company/list","text":"<p>\u67e5\u770b\u6240\u6709\u4e1a\u52a1\u5b9e\u4f53</p> <p>\u9700\u6c42\u6743\u9650\uff1asuperadmin</p> <pre><code>POST\n{\n\"token\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"company\": [\n{\n\"company_uuid\": \"\",\n\"company_name\": \"\"\n}\n]\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> </ul>"},{"location":"API/company/#companyquery","title":"/company/query","text":"<p>\u8fd4\u56de\u90e8\u95e8\u6811</p> <pre><code>POST\n{\n\"token\": \"\",\n\"company_uuid\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": [\n{\n\"department_uuid\": \"\",\n\"department_name\": \"\",\n\"father\": \"\"\n}\n]\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>company_uuid\u65e0\u6548\uff1a<code>code = 10, message = \"invalid company_uuid\"</code></li> </ul>"},{"location":"API/department/","title":"Department","text":""},{"location":"API/department/#departmentcreate","title":"/department/create","text":"<p>\u65b0\u5efa\u90e8\u95e8</p> <p>\u9700\u6c42\u6743\u9650  superadmin / useradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"father_uuid\": \"\",\n\"name\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7236\u90e8\u95e8\u4e0d\u5b58\u5728\u6216\u4e3a\u6839\uff1a <code>code = 10, message = \"invalid father\"</code></li> </ul>"},{"location":"API/department/#departmentdelete","title":"/department/delete","text":"<p>\u5220\u9664\u90e8\u95e8</p> <p>\u9700\u6c42\u6743\u9650 superadmin / useradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"department_uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u90e8\u95e8\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid uuid\"</code></li> <li>\u975e\u7a7a\u90e8\u95e8\uff1a<code>code = 11, message = \"not empty department\"</code></li> </ul>"},{"location":"API/department/#departmentrename","title":"/department/rename","text":"<p>\u4fee\u6539\u90e8\u95e8\u540d\u5b57</p> <p>\u9700\u6c42\u6743\u9650\uff1asuperadmin / useradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"uuid\": \"\",\n\"new_name\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u90e8\u95e8\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid uuid\"</code></li> </ul>"},{"location":"API/department/#departmentget_self_company","title":"department/get_self_company","text":"<p>\uff08\u4ec5\u4f5c\u6570\u636e\u5e93\u8fc7\u6e21\u7528\uff09</p> <p>\u9700\u6c42\u6743\u9650\uff1asuperadmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"uuid\": \"\",\n\"new_name\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> </ul>"},{"location":"API/exlink/","title":"Exlink","text":""},{"location":"API/exlink/#exlinkcreate","title":"exlink/create","text":"<p>\u6743\u9650\uff1auseradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"title\": \"\", //0 &lt; len &lt; 20\n\"url\": \"\" //no limits\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"exlink_uuid\": \"\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u6ca1\u6709\u7279\u6b8a\u7684 code \u548c\u9519\u8bef\u4fe1\u606f\u3002</p>"},{"location":"API/exlink/#exlinkdelete","title":"exlink/delete","text":"<p>\u6743\u9650\uff1auseradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"exlink_uuid\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <ul> <li>\u4e0d\u5b58\u5728\u7684 exlink uuid \u6216\u4e0d\u662f\u672c\u4e1a\u52a1\u5b9e\u4f53\u7684\u5916\u94fe\uff1a<code>code = 50, msg = \"invalid exlink uuid\"</code></li> </ul>"},{"location":"API/exlink/#exlinklist","title":"exlink/list","text":"<p>\u6743\u9650\uff1a\u4e0d\u662fsuperadmin</p> <pre><code>POST\n{\n\"token\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"exlinks\": [\n{\n\"exlink_uuid\": \"\",\n\"title\": \"\",\n\"url\": \"\"\n}\n]\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u6ca1\u6709\u7279\u6b8a\u7684 code \u548c\u9519\u8bef\u4fe1\u606f\u3002</p>"},{"location":"API/record/","title":"API: /record","text":"<ul> <li>token \u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token \u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> </ul> <p>\u6743\u9650\u63a7\u5236\uff1a\u8d85\u7ba1\u53ef\u4ee5\u4efb\u610f\u641c\u7d22\uff0c\u7cfb\u7edf\u7ba1\u7406\u5458\u53ea\u80fd\u6307\u5b9a\u7528\u6237\u641c\u7d22\uff0c\u8d44\u4ea7\u7ba1\u7406\u5458\u53ea\u80fd\u6307\u5b9a\u8d44\u4ea7\u641c\u7d22\u3002\u4efb\u610f\u7ba1\u7406\u5458\u53ef\u4ee5\u51ed\u501f\u8bb0\u5f55\u7684 uuid \u83b7\u53d6\u8bb0\u5f55\u7684\u5177\u4f53\u5185\u5bb9\u3002</p>"},{"location":"API/record/#recordinfo","title":"/record/info","text":"<p>\u83b7\u53d6\u8bb0\u5f55\u4fe1\u606f\u3002</p> <p>\u6743\u9650\uff1a\u4efb\u610f\u7ba1\u7406\u5458</p> <pre><code>{\n\"token\": \"\",\n\"uuid\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": {\nres_dict = {\n\"uuid\": self.uuid.hex,\n\"time\": self.time.isoformat(),\n\"caller\": self.caller.username if self.caller else None,\n\"company\": self.company.uuid.hex if self.company else None,\n\"event\": self.event,\n\"brief_template\": self.brief_template,\n\"brief_json\": self.brief_json,\n// detail_json \u53ea\u6709 info \u624d\u4f1a\u63d0\u4f9b\n\"detail_json\": self.detail_json\n}\n}\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a - uuid \u65e0\u6548\uff1a<code>code = 10, message = \"invalid uuid\"</code></p>"},{"location":"API/record/#recordsearch","title":"/record/search","text":"<p>\u641c\u7d22\u5de5\u5355\u3002\u53ef\u89c1\u8303\u56f4\u4e3a\uff1a</p> <ul> <li>\u666e\u901a\u7528\u6237\u4ec0\u4e48\u4e5f\u770b\u4e0d\u5230</li> <li>\u5982\u679c\u53ea\u662f\u8d44\u4ea7\u7ba1\u7406\u5458\uff0c\u53ea\u80fd\u67e5\u770b\u8d44\u4ea7\u76f8\u5173\u7684\u8bb0\u5f55\uff0c\u4e5f\u5c31\u662f <code>/{ticket, asset, category}/...</code></li> <li>\u5982\u679c\u53ea\u662f\u7528\u6237\u7ba1\u7406\u5458\uff0c\u53ea\u80fd\u67e5\u770b\u7528\u6237\u76f8\u5173\u7684\u8bb0\u5f55\uff0c\u4e5f\u5c31\u662f <code>/{department, company, user}/</code></li> <li>\u53cc\u6599\u7ba1\u7406\u5458\u90fd\u80fd\u770b</li> <li>\u7ba1\u7406\u5458\u53ea\u80fd\u770b\u672c\u516c\u53f8\u7684\u8bb0\u5f55</li> <li>\u8d85\u7ba1\u53ef\u4ee5\u770b\u6240\u6709\u8bb0\u5f55</li> </ul> <pre><code>{\n\"token\": \"\",\n\"filter\": {\n\"event_contains\": \"\",\n\"brief_json_contains\": \"\",\n// both supports comma separated list; space shall be filtered\n// \"xxx_contains\": \"a,,,b   ,cd e\" filters record\n// that contains 'a' AND 'b' AND 'cd e'\n// Note this is substring search for json like \"{'caller': 'user1', 'user': 'alex'}\"\n// So contains = \"alle\" MATCHES the string;\n// This allows advanced usages like contains = \"'role1': 'user1', 'role2': 'user2'\"\n// in this case comma is seperated, but the 'role': 'content' structure is preserved\n},\n\"numberperpage\": number, // optional, None for 50, Max = 50\n\"pagenumber\": number // optional, None for 1\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"num_pages\": number,\n\"num_items\": number,\n\"data\": [\n{\n\"uuid\": self.uuid.hex,\n\"time\": self.time.isoformat(),\n\"caller\": self.caller.username if self.caller else None,\n\"company\": self.company.uuid.hex if self.company else None,\n\"event\": self.event,\n\"brief_template\": self.brief_template,\n\"brief_json\": self.brief_json,\n}\n]\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre>"},{"location":"API/ticket/","title":"API_tickets","text":"<ul> <li>token \u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token \u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u4e0d\u5b58\u5728\u7684type\uff1a<code>code = 40, message = invalid ticket type\"</code></li> </ul>"},{"location":"API/ticket/#_1","title":"\u62bd\u8c61\u5de5\u5355","text":"<pre><code>requester = models.ForeignKey(User, on_delete=models.SET_NULL, null=True, related_name=\"+\")\nrequest_time = models.DateTimeField(auto_now_add=True)\nrequest_msg = models.TextField(max_length=MAX_TICKETMSG_LEN, blank=True, default=\"\")\napprover = models.ForeignKey(User, on_delete=models.SET_NULL, null=True, default=None, related_name=\"+\") # '+' for unavailable backward relation \napprove_time = models.DateTimeField(null=True, default=None)\napprove_msg = models.TextField(null=True, max_length=MAX_TICKETMSG_LEN, default=None)\nuuid = models.UUIDField(primary_key=True, default=uuid.uuid4, unique=True, editable=False)\nasset = models.ForeignKey(Asset, on_delete=models.SET_NULL, null=True)\nnumber = IntegerField(default=0)\ndepartment = models.ForeignKey(Department, on_delete=models.SET_NULL, null=True)\nstatus = OPEN = \"OPEN\", ACCEPTED = \"ACCEPTED\", REJECTED = \"REJECTED\", INVALID = \"INVALID\"\n</code></pre>"},{"location":"API/ticket/#asset","title":"asset\u7684\u72b6\u6001","text":"<pre><code>IDLE, IN_USE, IN_MAINTAIN, RETIRED, DELETED\n\u65b0\u589e\uff1a TO_MAINTAIN, TO_RETURN\n</code></pre>"},{"location":"API/ticket/#ticketinfo","title":"/ticket/info","text":"<p>\u83b7\u53d6\u5de5\u5355\u4fe1\u606f\u3002</p> <p>\u6743\u9650\uff1a\u4ec5\u9650\u672c\u4e1a\u52a1\u5b9e\u4f53</p> <pre><code>{\n\"token\": \"\",\n\"ticket_uuid\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": {    \"uuid\": self.uuid.hex,\n\"type\": self.ticket_type,\n\"status\": self.status,\n\n\"asset_uuid\": self.asset.uuid.hex if self.asset else \"\",\n\"asset_name\": self.asset.name if self.asset else \"\",\n\"asset_number\": self.number if self.asset else \"\",\n\n\"requester\": self.requester.username if self.requester else \"\",\n\"request_time\": self.request_time,\n\"approver\": self.approver.username if self.approver else \"\",\n\"approve_time\": self.approve_time,\n\n\"department_uuid\": self.department.uuid.hex if self.department else \"\",\n\"department_name\": self.department.name if self.department else \"\",\n\n\"request_msg\": self.request_msg,\n\"approve_msg\": self.approve_msg,\n}\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a - uuid \u65e0\u6548\uff0c\u5305\u62ec\u81ea\u5df1\u4e0d\u53ef\u89c1\uff1a<code>code = 10, message = \"invalid ticket uuid\"</code></p>"},{"location":"API/ticket/#ticketsearch","title":"/ticket/search","text":"<p>\u641c\u7d22\u5de5\u5355\u3002\u4ec5\u9650\u81ea\u5df1\u53ef\u89c1\u7684\u90a3\u4e9b\u3002\u53ef\u89c1\u5305\u62ec\uff1a</p> <ul> <li>\u8d44\u4ea7\u7ba1\u7406\u5458\u53ef\u89c1\uff0c\u5de5\u5355\u7684\u90e8\u95e8\u662f\u81ea\u5df1\u7684\u5b50\u6811</li> <li>\u7528\u6237\u53ef\u89c1\uff0c\u5de5\u5355\u7684\u53c2\u4e0e\u8005\u5305\u542b\u81ea\u5df1</li> </ul> <p>\u6743\u9650\uff1a\u4ec5\u9650\u672c\u4e1a\u52a1\u5b9e\u4f53</p> <pre><code>{\n\"token\": \"\",\n\"filter\": { // every field is optional\n\"type\": \"REQUEST\", // [\"REQUEST\", \"MAINTAIN\", \"RETURN\"]\n\"status\": \"OPEN\", // [\"OPEN\", \"ACCEPTED\", \"REJECTED\", \"INVALID\"] \u540e\u7aef\u5bf9\u5e94OPEN, APPROVED, REJECTED, INVALID/RETURNED\n\"asset_uuid\": \"\", // exact\n\"username\": \"\", // exact\n\"department_uuid_exact\": \"\", // exact\n\"department_uuid_subtree\": \"\", // subtree; \u5982\u679c\u4e0d\u5305\u542b\uff0c\u5176\u5b9e\u5bf9\u4e8e\u8d44\u4ea7\u7ba1\u7406\u5458\u6765\u8bf4\u5c31\u662f\u81ea\u5df1\u7684department\u7684\u5b50\u6811\n},\n\"numberperpage\": number, // optional, None for 50, Max = 50\n\"pagenumber\": number // optional, None for 1\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"num_pages\": number,\n\"num_items\": number,\n\"data\": [\n{\n\"uuid\": self.uuid.hex,\n\"type\": self.ticket_type,\n\"status\": self.status,\n\n\"asset_uuid\": self.asset.uuid.hex if self.asset else \"\",\n\"asset_name\": self.asset.name if self.asset else \"\",\n\"asset_number\": self.number if self.asset else \"\",\n\n\"requester\": self.requester.username if self.requester else \"\",\n\"request_time\": self.request_time,\n\"approver\": self.approver.username if self.approver else \"\",\n\"approve_time\": self.approve_time,\n\n\"department_uuid\": self.department.uuid.hex if self.department else \"\",\n\"department_name\": self.department.name if self.department else \"\",\n}\n]\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u4e0d\u4f1a\u51fa\u9519\uff0c\u9519\u4e86\u5c31\u662f\u7a7a\u5217\u8868\u3002</p>"},{"location":"API/ticket/#ticketrequest","title":"/ticket/request","text":"<p>info, create, approve</p> <p>INVALID \u4ec5\u4ec5\u53d1\u751f\u5728\uff0c\u88ab\u7533\u8bf7\u7684\u8d44\u4ea7\u88ab\u4fee\u6539\u4e86\u3002\u3010\u8bb0\u5f97\u6539asset\u76f8\u5173\u64cd\u4f5c\u7684\u526f\u4f5c\u7528\uff01\u3011</p>"},{"location":"API/ticket/#ticketrequestcreate","title":"/ticket/request/create","text":"<ul> <li>IDLE -&gt; IDLE</li> </ul> <p>\u5458\u5de5\u7533\u8bf7\u8d44\u4ea7\uff0c\u521b\u5efa\u7533\u8bf7\u5de5\u5355\u3002\u4f1a\u628a\u5e73\u884c\u7684\u5176\u4ed6\u7533\u8bf7\u5de5\u5355\u90fd\u62d2\u7edd\u6389\u3002</p> <p>\u6743\u9650\uff1a\u4ec5\u9650\u5458\u5de5\u7533\u8bf7\u5f53\u524d\u4e1a\u52a1\u5b9e\u4f53\u7684\u6839\u8d44\u4ea7</p> <pre><code>{\n\"token\": \"\",\n\"asset_uuid\": \"\",\n\"message\": \"\", // 0 &lt;= len &lt;= 1024\n\"number\": 233, // not optional, use 1 for most cases\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"ticket_uuid\": \"\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>uuid \u65e0\u6548\uff0c\u5305\u62ec\u7533\u8bf7\u5230\u975e\u672c\u4e1a\u52a1\u5b9e\u4f53\u8d44\u4ea7\uff1a<code>code = 10, message = \"invalid asset uuid\"</code></li> <li>\u8d44\u4ea7\u4e0d\u662f\u6839\uff1a<code>code = 11, message = \"asset not root\"</code></li> <li>\u8d44\u4ea7\u4e0d\u662fidle\uff1a<code>code = 12, message = \"asset not idle\"</code></li> <li>\u8d44\u4ea7\u6570\u91cf\u4e0d\u8db3\uff0c\u6216\u5bf9\u6761\u76ee\u578b\u8d44\u4ea7\u6307\u5b9a\u975e1\u7684\u6570\u91cf\uff1a<code>code = 13, message = \"asset number error\"</code></li> </ul>"},{"location":"API/ticket/#ticketrequestapprove","title":"/ticket/request/approve","text":"<ul> <li>accept=true: IDLE -&gt; IN_USE</li> <li>accept=false: IDLE -&gt; IDLE</li> </ul> <p>\u8d44\u4ea7\u7ba1\u7406\u5458\u5ba1\u6279\u7533\u8bf7\u5de5\u5355\uff0c\u540c\u610f\u6216\u62d2\u7edd</p> <p>\u6743\u9650\uff1a\u8d44\u4ea7\u7ba1\u7406\u5458\u4e3a\u5b50\u6811</p> <pre><code>{\n\"token\": \"\",\n\"ticket_uuid\": \"\",\n\"accept\": true, // true for accept, false for reject\n\"message\": \"\" // 0 &lt;= len &lt;= 1024\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"ticket_uuid\": \"\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a - uuid \u65e0\u6548\uff0c\u5305\u62ec\u81ea\u5df1\u4e0d\u53ef\u89c1\u3001\u4e0d\u662f\u7533\u8bf7\u5de5\u5355\uff1a<code>code = 30, message = \"invalid ticket uuid\"</code> - \u5de5\u5355\u4e0d\u662fopen\uff1a<code>code = 31, message = \"ticket not open\"</code></p>"},{"location":"API/ticket/#ticketrequestcancel","title":"/ticket/request/cancel","text":"<ul> <li>IDLE -&gt; IDLE</li> </ul> <p>\u6743\u9650\uff1a\u7528\u6237\u4e3a\u81ea\u5df1</p> <pre><code>{\n\"token\": \"\",\n\"ticket_uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"ticket_uuid\": \"\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a - uuid \u65e0\u6548\uff0c\u5305\u62ec\u81ea\u5df1\u4e0d\u53ef\u89c1\u3001\u4e0d\u662f\u7533\u8bf7\u5de5\u5355\uff1a<code>code = 30, message = \"invalid ticket uuid\"</code> - \u5de5\u5355\u4e0d\u662fopen\uff1a<code>code = 31, message = \"ticket not open\"</code></p>"},{"location":"API/ticket/#ticketmaintain","title":"/ticket/maintain","text":"<p>create, approve, return</p> <p>return \u4e8b\u5b9e\u4e0a\u4e0d\u64cd\u4f5c\u5de5\u5355\uff0c\u53ea\u662f\u628a\u8d44\u4ea7\u72b6\u6001\u6539\u4e3a IN_USE\u3002</p>"},{"location":"API/ticket/#ticketmaintaincreate","title":"/ticket/maintain/create","text":"<ul> <li>IN_USE -&gt; TO_MAINTAIN</li> </ul> <p>\u7528\u6237\u63d0\u51fa\u8bf7\u6c42\u5bf9\u8d44\u4ea7\u8fdb\u884c\u7ef4\u4fdd\uff0c\u521b\u5efa\u7ef4\u4fdd\u5de5\u5355\u3002\u7ef4\u4fdd\u65f6\uff0c\u6302\u8d26\u4eba\u4e3a\u81ea\u5df1\u3002</p> <p>\u6743\u9650\uff1a\u4ec5\u9650\u7528\u6237\u63d0\u51fa\u81ea\u5df1\u7684\u8d44\u4ea7</p> <pre><code>{\n\"token\": \"\",\n\"asset_uuid\": \"\",\n\"message\": \"\" // 0 &lt;= len &lt;= 1024\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"ticket_uuid\": \"\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>uuid \u65e0\u6548\uff0c\u5305\u62ec\u7533\u8bf7\u5230\u975e\u672c\u4e1a\u52a1\u5b9e\u4f53\u8d44\u4ea7\uff1a<code>code = 10, message = \"invalid asset uuid\"</code></li> <li>\u8d44\u4ea7\u4e0d\u662f\u6839\uff1a<code>code = 11, message = \"asset not root\"</code></li> <li>\u8d44\u4ea7\u4e0d\u5c5e\u4e8e\u81ea\u5df1\uff08\u5305\u62ec\u4e0d\u662f IN_USE\uff09\uff1a<code>code = 12, message = \"asset not belong to you\"</code></li> </ul>"},{"location":"API/ticket/#ticketmaintainapprove","title":"/ticket/maintain/approve","text":"<ul> <li>accept=true: TO_MAINTAIN -&gt; IN_MAINTAIN</li> <li>accept=false: TO_MAINTAIN -&gt; IN_USE</li> </ul> <p>\u8d44\u4ea7\u7ba1\u7406\u5458\u5ba1\u6279\u7ef4\u4fdd\u5de5\u5355\uff0c\u540c\u610f\u6216\u62d2\u7edd</p> <p>\u6743\u9650\uff1a\u8d44\u4ea7\u7ba1\u7406\u5458\u4e3a\u5b50\u6811</p> <pre><code>{\n\"token\": \"\",\n\"ticket_uuid\": \"\",\n\"accept\": true, // true for accept, false for reject\n\"message\": \"\" // 0 &lt;= len &lt;= 1024\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"ticket_uuid\": \"\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a - uuid \u65e0\u6548\uff0c\u5305\u62ec\u81ea\u5df1\u4e0d\u53ef\u89c1\u3001\u4e0d\u662f\u7ef4\u4fdd\u5de5\u5355\uff1a<code>code = 30, message = \"invalid ticket uuid\"</code> - \u5de5\u5355\u4e0d\u662fopen\uff1a<code>code = 31, message = \"ticket not open\"</code></p>"},{"location":"API/ticket/#ticketmaintainreturn","title":"/ticket/maintain/return","text":"<ul> <li>IN_MAINTAIN -&gt; IN_USE</li> </ul> <p>\u8d44\u4ea7\u7ba1\u7406\u5458\u5f52\u8fd8\u7ef4\u4fdd\u8d44\u4ea7\uff0c\u628a\u8d44\u4ea7\u72b6\u6001\u6539\u4e3a IN_USE\u3002\u4e0d\u6d89\u53ca\u5de5\u5355\u3002</p> <p>\u6743\u9650\uff1a\u8d44\u4ea7\u7ba1\u7406\u5458\u4e3a\u5b50\u6811</p> <pre><code>{\n\"token\": \"\",\n\"asset_uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a - \u8d44\u4ea7 uuid \u65e0\u6548\uff0c\u5305\u62ec\u8d44\u4ea7\u6302\u8d26\u90e8\u95e8\u4e0d\u662f\u5b50\u6811\uff1a<code>code = 10, message = \"asset does not exist\"</code> - \u8d44\u4ea7\u4e0d\u662f\u6839\uff1a<code>code = 11, message = \"asset not root\"</code> - \u8d44\u4ea7\u4e0d\u662f IN_MAINTAIN\uff1a<code>code = 12, message = \"asset not in maintain\"</code></p>"},{"location":"API/ticket/#ticketmaintaincancel","title":"/ticket/maintain/cancel","text":"<ul> <li>TO_MAINTAIN -&gt; IN_USE</li> </ul> <p>\u6743\u9650\uff1a\u7528\u6237\u4e3a\u81ea\u5df1</p> <pre><code>{\n\"token\": \"\",\n\"ticket_uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"ticket_uuid\": \"\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a - uuid \u65e0\u6548\uff0c\u5305\u62ec\u81ea\u5df1\u4e0d\u53ef\u89c1\u3001\u4e0d\u662f\u7533\u8bf7\u5de5\u5355\uff1a<code>code = 30, message = \"invalid ticket uuid\"</code> - \u5de5\u5355\u4e0d\u662fopen\uff1a<code>code = 31, message = \"ticket not open\"</code></p>"},{"location":"API/ticket/#ticketreturn","title":"/ticket/return","text":"<p>create, approve</p>"},{"location":"API/ticket/#ticketreturncreate","title":"/ticket/return/create","text":"<ul> <li>IN_USE -&gt; TO_RETURN</li> </ul> <p>\u5458\u5de5\u7533\u8bf7\u5f52\u8fd8\u8d44\u4ea7\uff0c\u521b\u5efa\u5f52\u8fd8\u5de5\u5355</p> <p>\u6743\u9650\uff1a\u4ec5\u9650\u5458\u5de5\u5f52\u8fd8\u81ea\u5df1\u7684\u8d44\u4ea7</p> <pre><code>{\n\"token\": \"\",\n\"asset_uuid\": \"\",\n\"message\": \"\", // 0 &lt;= len &lt;= 1024\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"ticket_uuid\": \"\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>uuid \u65e0\u6548\uff0c\u5305\u62ec\u7533\u8bf7\u5230\u975e\u672c\u4e1a\u52a1\u5b9e\u4f53\u8d44\u4ea7\uff1a<code>code = 10, message = \"invalid asset uuid\"</code></li> <li>\u8d44\u4ea7\u4e0d\u662f\u6839\uff1a<code>code = 11, message = \"asset not root\"</code></li> <li>\u8d44\u4ea7\u4e0d\u5c5e\u4e8e\u81ea\u5df1\uff08\u5305\u62ec\u4e0d\u662f IN_USE\uff09\uff1a<code>code = 12, message = \"asset not belong to you\"</code></li> </ul>"},{"location":"API/ticket/#ticketreturnapprove","title":"/ticket/return/approve","text":"<ul> <li>TO_RETURN -&gt; IDLE</li> </ul> <p>\u7ba1\u7406\u5458\u5ba1\u6279\u5f52\u8fd8\u5de5\u5355\uff0c\u540c\u610f\u6216\u62d2\u7edd</p> <p>\u6743\u9650\uff1a\u8d44\u4ea7\u7ba1\u7406\u5458\u4e3a\u5b50\u6811</p> <pre><code>{\n\"token\": \"\",\n\"ticket_uuid\": \"\",\n\"accept\": true, // true for accept, false for reject\n\"message\": \"\", // 0 &lt;= len &lt;= 1024\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"ticket_uuid\": \"\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a - uuid \u65e0\u6548\uff0c\u5305\u62ec\u81ea\u5df1\u4e0d\u53ef\u89c1\u3001\u4e0d\u662f\u7533\u8bf7\u5de5\u5355\uff1a<code>code = 30, message = \"invalid ticket uuid\"</code> - \u5de5\u5355\u4e0d\u662fopen\uff1a<code>code = 31, message = \"ticket not open\"</code></p>"},{"location":"API/ticket/#ticketreturncancel","title":"/ticket/return/cancel","text":"<ul> <li>TO_MAINTAIN -&gt; IN_USE</li> </ul> <p>\u6743\u9650\uff1a\u7528\u6237\u4e3a\u81ea\u5df1</p> <pre><code>{\n\"token\": \"\",\n\"ticket_uuid\": \"\",\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"ticket_uuid\": \"\",\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a - uuid \u65e0\u6548\uff0c\u5305\u62ec\u81ea\u5df1\u4e0d\u53ef\u89c1\u3001\u4e0d\u662f\u7533\u8bf7\u5de5\u5355\uff1a<code>code = 30, message = \"invalid ticket uuid\"</code> - \u5de5\u5355\u4e0d\u662fopen\uff1a<code>code = 31, message = \"ticket not open\"</code></p>"},{"location":"API/user/","title":"User","text":""},{"location":"API/user/#userlogin","title":"/user/login","text":"<p>\u7528\u6237\u767b\u5f55</p> <pre><code>POST\n{\n\"username\" : \"\", # a-zA-Z0-9, 1 &lt;= length &lt;= 20\n\"password\" : \"\", # this is hashed\n\"timestamp\": Int64 # unix time in miliseconds\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"token\": \"\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff1a<code>code = 1, message = \"username or password error\"</code></li> <li>\u767b\u5f55\u8d85\u65f6\uff1a<code>code = 2, message = \"login timeout\"</code></li> <li>\u7528\u6237\u5df2\u88ab\u9501\u5b9a\uff1a<code>code = 10, message = \"user locked\"</code></li> </ul> <p>\u5bc6\u7801\u54c8\u5e0c\u65b9\u5f0f\uff0c\u4f7f\u7528 <code>sha256</code> \u8fdb\u884c\u54c8\u5e0c\u52a0\u5bc6\u3002</p> <p>\u6563\u5217\u503c\u5373\u4e3a  <code>Hash(Hash(\"sto\" + password + \"orz\") + (string)timestamp)</code></p> <p>\u540e\u7aef\u6570\u636e\u5e93\u53ea\u5b58\u50a8 <code>Hash(\"sto\" + password + \"orz\")</code></p> <p>python\u91cc\u5199\u4f5chashlib.sha256((\"sto\" + password + \"orz\").encode(\"utf-8\")).hexdigest()\uff0c\u7ed3\u679c\u662f64\u4f4d16\u8fdb\u5236\u6570\uff0c\u5c0f\u5199</p>"},{"location":"API/user/#userlogout","title":"/user/logout","text":"<p>\u8fd9\u4e2a\u8bf7\u6c42\u7684\u8bed\u4e49\u662f\uff1a\u8ba9\u7ed9\u5b9a\u7684token\u7acb\u523bexpire\uff0c\u4f46\u662f\u4e0d\u5220\u9664\u3002</p> <pre><code>POST\n{\n\"token\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> </ul>"},{"location":"API/user/#userusername","title":"/user/username","text":"<p>\u83b7\u53d6\u7528\u6237\u540d</p> <pre><code>POST\n{\n\"token\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"username\": \"\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> </ul>"},{"location":"API/user/#useruserinfo","title":"/user/userinfo","text":"<p>\u83b7\u53d6\u7528\u6237\u4fe1\u606f</p> <pre><code>POST\n{\n\"token\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"data\": {\n\"username\": \"\",\n\"department_list_name\": [\"\"],\n\"company_uuid\": \"\",\n\"department_uuid\": \"\",\n# \u5bf9\u4e8e\u8d85\u7ba1\uff0clist\u4e3a\u7a7a\uff0c\u4e24\u4e2auuid\u4e3a\u7a7a\u4e32\n\"is_superadmin\": bool,\n\"is_useradmin\": bool,\n\"is_assetadmin\": bool,\n\"is_OA_banded\": bool,\n\"OA_username\": \"\", // \"\" if not band\n}\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> </ul>"},{"location":"API/user/#userchangepassword","title":"/user/changepassword","text":"<p>\u7528\u6237\u81ea\u5df1\u4fee\u6539\u5bc6\u7801</p> <pre><code>POST\n{\n\"username\": \"\",\n\"oldpassword\": \"\", # hash with sto-orz and timestamp\n\"timestamp\": \"\",\n\"newpassword\": \"\" # hash with sto-orz; no timestamp!\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff1a<code>code = 1, message = \"username or password error\"</code></li> <li>\u767b\u5f55\u8d85\u65f6\uff1a<code>code = 2, message = \"login timeout\"</code></li> </ul>"},{"location":"API/user/#usersetpassword","title":"/user/setpassword","text":"<p>\u7ba1\u7406\u5458\u5f3a\u5236\u4fee\u6539\u5bc6\u7801</p> <p>\u9700\u6c42\u6743\u9650\uff1aadmin / useradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"username\": \"\",\n\"newpassword\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7528\u6237\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid username\"</code></li> </ul>"},{"location":"API/user/#usercreate","title":"/user/create","text":"<p>\u7ba1\u7406\u5458\u521b\u5efa\u7528\u6237</p> <p>\u9700\u6c42\u6743\u9650\uff1aadmin / useradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"username\": \"\", # a-zA-Z0-9, 1 &lt;= length &lt;= 20\n\"password\": \"\", # this is hashed\n\"department_uuid\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7528\u6237\u5df2\u7ecf\u5b58\u5728\uff1a <code>code = 10, message = \"exist the same user\"</code></li> <li>\u90e8\u95e8\u4e0d\u5b58\u5728\uff1a <code>code = 11, message = \"invalid department uuid\"</code></li> </ul>"},{"location":"API/user/#userdelete","title":"/user/delete","text":"<p>\u7ba1\u7406\u5458\u5220\u9664\u7528\u6237</p> <p>\u9700\u6c42\u6743\u9650\uff1aadmin / useradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"username\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7528\u6237\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid username\"</code></li> <li>\u5220\u9664\u81ea\u5df1\uff1a<code>code = 20, message = \"deleting self\"</code></li> </ul>"},{"location":"API/user/#userprivilege","title":"/user/privilege","text":"<p>\u7ba1\u7406\u5458\u8bbe\u7f6e\u7528\u6237\u6743\u9650</p> <p>\u9700\u6c42\u6743\u9650\uff1a special</p> <pre><code>POST\n{\n\"token\": \"\",\n\"username\": \"\",\n\"set_useradmin\": bool,\n\"set_assetadmin\": bool\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7528\u6237\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid username\"</code></li> </ul>"},{"location":"API/user/#userlock","title":"/user/lock","text":"<p>\u7ba1\u7406\u5458\u9501\u5b9a\u7528\u6237\uff0c\u6b64\u64cd\u4f5c\u7684\u526f\u4f5c\u7528\u8be5\u7528\u6237\u7684\u6240\u6709\u5f53\u524d\u6709\u6548\u7684token\u7acb\u523b\u5931\u6548</p> <p>\u9700\u6c42\u6743\u9650\uff1a admin / useradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"username\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7528\u6237\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid username\"</code></li> <li>\u7528\u6237\u5df2\u88ab\u9501\u5b9a\uff1a <code>code = 11, message = \"user has been locked\"</code></li> </ul>"},{"location":"API/user/#userunlock","title":"/user/unlock","text":"<p>\u7ba1\u7406\u5458\u89e3\u9501\u7528\u6237</p> <p>\u9700\u6c42\u6743\u9650\uff1aadmin / useradmin</p> <pre><code>POST\n{\n\"token\": \"\",\n\"username\": \"\"\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\"\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u6743\u9650\u4e0d\u8db3\uff1a<code>code = 3, message = \"no access\"</code></li> <li>\u7528\u6237\u4e0d\u5b58\u5728\uff1a <code>code = 10, message = \"invalid username\"</code></li> <li>\u7528\u6237\u672a\u88ab\u9501\u5b9a\uff1a<code>code = 11, message = \"user not locked\"</code></li> </ul>"},{"location":"API/user/#usersearch","title":"/user/search","text":"<p>\u641c\u7d22\u7528\u6237</p> <pre><code>POST\n{\n\"token\": \"\",\n\"filter\": {\n\"department_uuid\": \"\", // optional\n\"username\": \"\" // optional\n}, // optional\n\"numberperpage\": number, // optional, None for 50, Max = 50\n\"pagenumber\": number // optional, None for 1\n}\nSuccess\n{\n\"code\": 0,\n\"info\": \"Succeed\",\n\"num_pages\": number,\n\"num_items\": number,\n\"data\": [\n{\n\"username\": \"\",\n\"department_list_name\": [\"\"],\n\"company_uuid\": \"\",\n\"department_uuid\": \"\",\n# \u5bf9\u4e8e\u8d85\u7ba1\uff0clist\u4e3a\u7a7a\uff0c\u4e24\u4e2auuid\u4e3a\u7a7a\u4e32\n\"is_superadmin\": bool,\n\"is_useradmin\": bool,\n\"is_assetadmin\": bool\n}\n]\n}\nFault\n{\n\"code\": *,\n\"info\": message\n}\n</code></pre> <p>\u9519\u8bef\u7c7b\u578b\uff1a</p> <ul> <li>token\u4e0d\u5b58\u5728\uff1a<code>code = 1, message = \"invalid token\"</code></li> <li>token\u8d85\u65f6\uff1a<code>code = 2, message = \"token expired\"</code></li> <li>\u90e8\u95e8\u4e0d\u5b58\u5728\uff1a <code>code = 11, message = \"invalid department uuid\"</code></li> </ul>"},{"location":"backend/models/","title":"models","text":""},{"location":"backend/models/#department","title":"Department","text":"<pre><code>name    : CharField(max_length=128, blank=False)\nuuid    : UUIDField(primary_key=True, default=uuid.uuid4, unique=True, editable=False)\nfather  : ForeignKey('self', on_delete=models.PROTECT, null=True)\nis_root : BooleanField(default=False)\n</code></pre>"},{"location":"backend/models/#user","title":"User","text":"<pre><code>username       : CharField (max_length=20, unique=True, blank=False)\npassword       : CharField (max_length=64, blank=False)\ndepartment     : ForeignKey(Department, on_delete=models.PROTECT, null=True)\nis_superadmin  : BooleanField(default=False)\nis_useradmin   : BooleanField(default=False)\nis_assetadmin  : BooleanField(default=False)\nis_locked      : BooleanField(default=False)\n</code></pre>"},{"location":"backend/models/#token","title":"Token","text":"<pre><code>key     : CharField(max_length=64)\nuser    : ForeignKey(User, on_delete=models.CASCADE)\ncreated : DateTimeField(auto_now_add=True)\nexpires : DateTimeField(default=timezone.now() + timedelta(days=1))\n</code></pre>"},{"location":"backend/models/#assetmpttmodel","title":"Asset(MPTTModel)","text":"<pre><code>uuid       :\nname       : \nparent = TreeForeignKey('self', on_delete=models.CASCADE, null=True, blank=True, related_name='children')\ndescription:\nstatus : enum { IDLE, IN_USE, IN_MAINTAIN, RETIRED, DELETED }\nusername  : nullable, foreignfield\ndepartment: foreignfield\ncount: number \u5982\u679cis_distinct\uff0c\u53ea\u80fd\u662f1\uff1b\u5426\u5219\u662f&gt;=0\u7684\u6574\u6570\nis_distinct: boolean \u662f\u5426\u662f\u6570\u91cf\u9650\u5b9a\u4e3a1\u7684\u8d44\u4ea7\ncategory: foreignfield\ncustom_attributes: JSONfield\n</code></pre>"},{"location":"backend/models/#categorympttmodel","title":"Category(MPTTModel):","text":"<p>https://django-mptt.readthedocs.io/en/latest/tutorial.html </p> <pre><code>    name        = models.CharField(max_length=MAX_CATEGORY_NAME_LEN, unique=False)\n    parent      = TreeForeignKey('self', on_delete=models.CASCADE, null=True, blank=True, related_name='children')\n    # \u8bf7\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684parent\u662f\u8fd9\u4e2a\u5e93\u8981\u6c42\u7684\uff0c\u4e0d\u80fd\u6539\u6210father\n    uuid        = models.UUIDField(primary_key=True, default=uuid.uuid4, unique=True, editable=False)\n    modified_by = models.ForeignKey(User, on_delete=models.CASCADE, null=True, blank=True, default=None)\n    modified_at = models.DateTimeField(auto_now=True)\n    #\u91cd\u547d\u540d\u3001\u521b\u5efa\u4f1a\u66f4\u65b0\u8fd9\u4e24\u4e2a\u5b57\u6bb5\n    company     = models.ForeignKey(Department, on_delete=models.CASCADE)   \n\n    class MPTTMeta:\n        order_insertion_by = ['name']\n</code></pre>"},{"location":"backend/models/#exlink","title":"Exlink","text":"<pre><code>    uuid    = models.UUIDField(primary_key=True, default=uuid.uuid4, unique=True, editable=False)\n    title   = models.CharField(max_length=MAX_EXLINK_NAME_LEN, blank=False)\n    url     = models.TextField(blank=True)\n    company = models.ForeignKey(to=Department, on_delete=models.CASCADE)\n</code></pre>"},{"location":"git/","title":"git","text":""},{"location":"git/#commit","title":"commit \u89c4\u8303","text":"<p><code>[x-y]&lt;type&gt;: &lt;message&gt;(#issue)</code></p> <p><code>\\[\\d{2}\\-\\d{2}\\](feat|fix|docs|test|style|conf|ui): .*\\(#\\d+\\)</code></p> <p><code>x</code> : \u529f\u80fd\u4e00\u7ea7\u7279\u6027\uff0c\u7f16\u53f7\u4ece 01 \u5f00\u59cb\u3002</p> <p><code>y</code> : \u529f\u80fd\u4e8c\u7ea7\u7279\u6027\uff0c\u7f16\u53f7\u4ece 01 \u5f00\u59cb\u3002</p> <p><code>&lt;type&gt;</code> : </p> <pre><code>* feat:     \u65b0\u529f\u80fd\n* fix:      \u4fee\u6539bug\n* docs:     \u4fee\u6539\u6587\u6863\n* style:    \u683c\u5f0f\u5316\u4ee3\u7801\u7ed3\u6784\uff08\u4e0d\u5f71\u54cd\u4ee3\u7801\u8fd0\u884c\u7684\u53d8\u52a8\uff09\n* test:     \u589e\u52a0\u6216\u4fee\u6539\u6d4b\u8bd5\n* conf:     \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u6216\u811a\u672c\n* ui:       \u754c\u9762\u8bbe\u8ba1\n</code></pre> <p><code>&lt;message&gt;</code> : \u5bf9 commit \u7684\u7b80\u77ed\u63cf\u8ff0</p>"},{"location":"git/#merge-request","title":"merge request \u89c4\u8303","text":"<p><code>[x-y]&lt;message&gt;(#issue)</code></p> <p><code>\\[\\d{2}\\-\\d{2}\\].*\\(#\\d+\\)</code></p>"},{"location":"git/#branch","title":"branch \u89c4\u8303","text":"<p><code>&lt;type&gt;-&lt;message&gt;</code></p> <p><code>(feat|fix)\\-.*</code></p> <p><code>&lt;type&gt;</code> : </p> <pre><code>* feat:     \u65b0\u529f\u80fd\n* fix:      \u4fee\u6539bug\n</code></pre>"},{"location":"requirement/record/","title":"record\u7684\u5b9e\u73b0","text":"<p>record \u652f\u6301\uff1a\u6309\u65f6\u95f4\u8303\u56f4 filter\uff0c\u6309\u5176\u4e2d\u5305\u542b\u7684\u5404\u79cd\u57df filter\u3002\u8fd4\u56de\u7684 record \u652f\u6301 paginator\u3002</p>"},{"location":"requirement/record/#record_1","title":"record\u7684\u8bbe\u8ba1","text":"<p>record \u5305\u542b\u51e0\u4e2a field\uff1a</p> <p>\u4f8b\u5982\uff0c\u767b\u5f55\u6210\u529f\u7684 record \u53ef\u4ee5\u662f\uff1a</p> <pre><code>uuid\ntime\ncaller\ncompany\nevent = \"success: /user/login\"\nbrief_template: \"{user} at {ip} successfully loginin at {time}\"\nbrief_json = '{\"user\": \"admin\", \"ip\": \"1.2.3.4\", time: \"2023-01-02T14:13:11.302226\"}'\n# searchable with substring, iso time format\ndetail_json = '{\"user\": user.detail(), ...}'\n</code></pre>"},{"location":"requirement/requirement/","title":"\u9700\u6c42\u5217\u8868","text":"<ol> <li> <p>\u7cfb\u7edf\u7ba1\u7406</p> <p>01-01 \u767b\u5f55\u767b\u51fa DONE</p> <p>01-02 \u7528\u6237\u7ba1\u7406 DONE</p> <p>01-03 \u89d2\u8272\u6743\u9650 DONE</p> </li> <li> <p>\u7ec4\u7ec7\u7ba1\u7406</p> <p>02-01 \u7ec4\u7ec7\u6570\u636e\u7ba1\u7406 DONE</p> <p>02-02 \u5458\u5de5\u6570\u636e\u7ba1\u7406 DONE</p> </li> <li> <p>\u7edf\u4e00\u95e8\u6237</p> <p>03-01 \u5e94\u7528\u95e8\u6237 WORKING</p> <p>03-02 \u5e94\u7528\u7ba1\u7406</p> <p>03-03 \u5f85\u529e\u4efb\u52a1</p> </li> <li> <p>\u7cfb\u7edf\u5ba1\u8ba1</p> <p>04-01 \u64cd\u4f5c\u65e5\u5fd7</p> <p>04-02 \u5bfc\u5165\u5bfc\u51fa\u7ba1\u7406</p> </li> <li> <p>OA \u5bf9\u63a5</p> <p>05-01 \u98de\u4e66\u8d26\u53f7\u7ed1\u5b9a</p> <p>05-02 \u98de\u4e66\u6d88\u606f\u63a8\u9001</p> <p>05-03 \u98de\u4e66\u5ba1\u6279\u7ba1\u7406</p> <p>05-04 \u98de\u4e66\u4eba\u4e8b\u7ba1\u7406</p> </li> <li> <p>\u4e1a\u52a1\u5b9e\u4f53\u5b9a\u4e49</p> <p>06-01 \u4e1a\u52a1\u5b9e\u4f53\u5b9a\u4e49 DONE</p> </li> <li> <p>\u8d44\u4ea7\u5b9a\u4e49</p> <p>07-01 \u8d44\u4ea7\u5206\u7c7b\u5b9a\u4e49 DONE \u00bd</p> <p>07-02 \u8d44\u4ea7\u5c5e\u6027\u5b9a\u4e49</p> <p>07-03 \u8d44\u4ea7\u6807\u7b7e\u5b9a\u4e49</p> </li> <li> <p>\u8d44\u4ea7\u7ba1\u7406</p> <p>08-01 \u8d44\u4ea7\u5f55\u5165 DONE</p> <p>08-02 \u8d44\u4ea7\u4fe1\u606f\u53d8\u66f4 WORKING</p> <p>08-03 \u8d44\u4ea7\u67e5\u8be2 WORKING</p> <p>08-04 \u8d44\u4ea7\u6279\u91cf\u5bfc\u5165</p> <p>08-05 \u8d44\u4ea7\u6e05\u9000</p> <p>08-06 \u8d44\u4ea7\u8c03\u62e8</p> <p>08-07 \u8d44\u4ea7\u5386\u53f2</p> </li> <li> <p>\u8d44\u4ea7\u4f7f\u7528</p> <p>09-01 \u8d44\u4ea7\u67e5\u770b WORKING</p> <p>09-02 \u8d44\u4ea7\u9886\u7528 WORKING</p> <p>09-03 \u8d44\u4ea7\u9000\u5e93</p> <p>09-04 \u8d44\u4ea7\u7ef4\u4fdd</p> <p>09-05 \u8d44\u4ea7\u8f6c\u79fb</p> <p>09-06 \u8d44\u4ea7\u626b\u63cf</p> </li> <li> <p>\u8d44\u4ea7\u5206\u6790</p> <p>10-01 \u8d44\u4ea7\u7edf\u8ba1</p> <p>10-02 \u8d44\u4ea7\u6298\u65e7</p> <p>10-03 \u8d44\u4ea7\u544a\u8b66</p> </li> <li> <p>\u5176\u4ed6\u8981\u6c42</p> <p>11-01 \u5b89\u5168\u8981\u6c42</p> <p>11-02 \u6613\u7528\u6027\u8981\u6c42</p> <p>11-03 \u6027\u80fd\u8981\u6c42</p> </li> </ol>"},{"location":"requirement/ticket/","title":"\u5de5\u5355\u5217\u8868","text":""},{"location":"requirement/ticket/#_1","title":"\u8d44\u4ea7\u7533\u8bf7","text":"<p>user + asset</p> <p>\u4ec5\u9650 asset \u6240\u5728\u7684\u90e8\u95e8\u7684\u8d44\u4ea7\u7ba1\u7406\u5458\u5ba1\u6279</p>"},{"location":"requirement/ticket/#_2","title":"\u8d44\u4ea7\u9000\u5e93","text":"<p>\u4ec5\u9650 asset \u6240\u5728\u7684\u90e8\u95e8\u7684\u8d44\u4ea7\u7ba1\u7406\u5458\u5904\u7406 // \u5bf9\u7ebf1\uff1a\u53d6\u6d88\u5de5\u5355\uff0c\u53ea\u4fdd\u7559\u65e5\u5fd7\uff0c\u539f\u56e0\u7531\u4e8e\u8d44\u4ea7\u9000\u5e93\u4e0d\u9700\u8981\u7ba1\u7406\u5458\u540c\u610f\u3002</p>"},{"location":"requirement/ticket/#_3","title":"\u8d44\u4ea7\u7ef4\u4fdd","text":"<p>\u7ef4\u4fdd\u4eba\uff1a    \u8ba9\u8d44\u4ea7\u7ba1\u7406\u5458\u5904\u7406\u7ef4\u4fdd\u95ee\u9898 // \u5bf9\u7ebf2\uff1a\u4e0d\u4fdd\u7559\u8d44\u4ea7\u7ef4\u4fdd\u4eba\uff0c</p> <p>\u5458\u5de5\u63d0\u51fa\u5bf9\u81ea\u5df1\u7684\u8d44\u4ea7\u8fdb\u884c\u7ef4\u4fdd\uff0c\u8d44\u4ea7\u7ba1\u7406\u5458\u5bf9\u6240\u6709\u5f53\u524d\u90e8\u95e8\u7684\u8d44\u4ea7\u8fdb\u884c\u7ef4\u4fdd</p>"},{"location":"requirement/ticket/#_4","title":"\u8d44\u4ea7\u8f6c\u79fb","text":"<p>user1 + asset + user2</p> <p>\u6682\u65f6\u4e0d\u8003\u8651\u505a\u3002</p>"},{"location":"requirement/ticket/#_5","title":"\u64cd\u4f5c\u65e5\u5fd7","text":"<p>\u7eaf\u6587\u672c + html\u6807\u8bb0 \u7eaf\u4e2d\u6587</p> <p>\u767b\u5f55\u65e5\u5fd7 \u67e5\u770b\u67d0\u4e2a\u7528\u6237\u7684\u767b\u5f55\u65e5\u5fd7 \u6bcf\u4e00\u6b21 request \u4e00\u4e2a log</p> <p>\u5173\u952e\u6570\u636e\u4fee\u6539\u65e5\u5fd7</p> <p>\u9700\u8981\u5355\u4e2a\u8d44\u4ea7\u7684\u6240\u6709\u65e5\u5fd7 \uff0c\u5355\u4e2a\u4eba\u7684\u6240\u6709\u64cd\u4f5c\u65e5\u5fd7</p> <p>\u67e5\u770b\uff1a\u767b\u5f55\u65e5\u5fd7 \u4e2a\u4eba/\u7ba1\u7406\u5458\u53ef\u89c1\uff0c  \u8d44\u4ea7\u65e5\u5fd7\uff1a\u8d44\u4ea7\u7ba1\u7406\u5458\u53ef\u89c1</p>"},{"location":"requirement/ticket/#api-2022416","title":"\u4ece\u9700\u6c42\u5230API, 2022.4.16","text":""},{"location":"requirement/ticket/#_6","title":"\u5e94\u7528\u95e8\u6237","text":"<p>done</p>"},{"location":"requirement/ticket/#_7","title":"\u8d44\u4ea7\u4fe1\u606f\u53d8\u66f4","text":"<p>/asset/modify \u53ea\u80fd\u53d8\u7a7a\u95f2\u7684\u8d44\u4ea7</p>"},{"location":"requirement/ticket/#nopicture","title":"\u8d44\u4ea7\u67e5\u8be2 \u8d44\u4ea7\u67e5\u770bnopicture","text":"<p>done</p>"},{"location":"requirement/ticket/#_8","title":"\u5de5\u5355\u8bbe\u8ba1","text":"<p>\u5148\u505a\u9886\u7528\u3002 \u7ef4\u4fdd\u9700\u8981\u95ee\u3002 # TODO</p>"},{"location":"requirement/ticket/#_9","title":"\u5de5\u5355\u57fa\u672c\u4fe1\u606f\uff08\u6240\u6709\u5de5\u5355\u901a\u7528\uff09","text":"<p>\u6ce8\uff1a\u6807*\u7684\u662f\u7531\u540e\u7aef\u81ea\u52a8\u7ef4\u62a4\u7684\u4fe1\u606f\uff0c\u5176\u4f59\u4fe1\u606f\u9700\u8981\u524d\u7aef\u63d0\u4f9b\uff0c\u4e0b\u540c\u3002</p> <p>\u7533\u8bf7\u4eba\uff0c\u7533\u8bf7\u65f6\u95f4*\uff0c\u7533\u8bf7\u9644\u52a0\u4fe1\u606f\uff0c\u5ba1\u6279\u4eba\uff0c\u5ba1\u6279\u65f6\u95f4*\uff0c\u5ba1\u6279\u9644\u52a0\u4fe1\u606f\uff0c\u5de5\u5355\u72b6\u6001\uff08\u5177\u4f53\u7c7b\u578b\u5728\u6bcf\u79cd\u5de5\u5355\u4e2d\u5b9a\u4e49\uff09*\u3002</p> <p>\u9644\u52a0\u4fe1\u606f\u7531\u7528\u6237\u586b\u5199\uff0c\u6307\u9700\u8981\u5411\u5bf9\u65b9\u8bf4\u660e\u7684\u4e00\u4e9b\u4e8b\u9879\uff0c\u4e0e\u8f6f\u4ef6\u903b\u8f91\u65e0\u5173\u3002</p>"},{"location":"requirement/ticket/#_10","title":"\u5f85\u529e\u4efb\u52a1","text":"<p>\u4eba\u641c\u7d22\u81ea\u5df1\u53ef\u4ee5\u5904\u7406\u7684\u5de5\u5355\u3002</p>"},{"location":"requirement/ticket/#_11","title":"\u8d44\u4ea7\u9886\u7528","text":"<p>\u4e00\u4e2a\u4eba\u53ef\u4ee5\u7533\u8bf7\u672c\u516c\u53f8\u7684\u6240\u6709\u7a7a\u95f2\u3001\u6839\uff08\u6ca1\u6709\u7236\u8d44\u4ea7\uff09\u8d44\u4ea7\uff0c\u63d0\u51fa\u5de5\u5355\u3002</p> <p>\u5de5\u5355\u7531\u8be5\u90e8\u95e8\u7684\u76f4\u63a5\u8d44\u4ea7\u7ba1\u7406\u5458\u5ba1\u6279\uff08\u5f3a\u63d0\u9192\uff09\uff0c\u6216\u8005\u66f4\u9ad8\u7684\u8d44\u4ea7\u7ba1\u7406\u5458\u5ba1\u6279\uff08\u5f31\u63d0\u9192\uff09\u3002</p> <p>\u5de5\u5355\u989d\u5916\u5305\u542b\uff1a\u7533\u8bf7\u8d44\u4ea7\uff0c\u7533\u8bf7\u65f6\u8d44\u4ea7\u6240\u5728\u90e8\u95e8*\u3002</p> <p>\u5de5\u5355\u7684\u72b6\u6001\uff1a\u5f85\u5ba1\u6279\uff0c\u5df2\u540c\u610f\uff0c\u5df2\u62d2\u7edd\uff0c\u903b\u8f91\u5931\u6548\uff08\u5728\u7533\u8bf7\u540e\uff0c\u8d44\u4ea7\u88ab\u6539\u8fc7\u4e86\uff09\uff0c\u5df2\u9000\u5e93\u3002</p>"},{"location":"requirement/ticket/#api","title":"\u9886\u7528\u5de5\u5355\u76f8\u5173API","text":"<p><code>class RequestTicket</code></p> <p>\u521b\u5efa\u9886\u7528\u5de5\u5355\uff0c\u7ed9\u5b9a\u7533\u8bf7\u4eba\uff0c\u7533\u8bf7\u8d44\u4ea7\uff0c\u9644\u52a0\u4fe1\u606f\u3002</p> <p>\u5ba1\u6838\uff08\u540c\u610f/\u62d2\u7edd\uff09\u9886\u7528\u5de5\u5355\uff0c\u7ed9\u5b9a\u5ba1\u6279\u4eba\u548c\u9644\u52a0\u4fe1\u606f\u3002</p> <p>\u641c\u7d22\u5de5\u5355\u3002\uff08\u5305\u542b\u67e5\u770b\u6211\u7684\u5f85\u529e\u4e8b\u9879\uff1bpaginator, filter\uff09</p> <p>\u9000\u5e93\u3002</p> <p>\u67e5\u770b\u5355\u4e2a\u5de5\u5355\u3002</p>"},{"location":"requirement/ticket/#_12","title":"\u8d44\u4ea7\u9000\u5e93","text":"<p>\u4e00\u4e2a\u4eba\u53ef\u4ee5\u7533\u8bf7\u5c06\u81ea\u5df1\u540d\u4e0b\u7684\u6761\u76ee\u578b\u8d44\u4ea7\uff08TODO: \u5efa\u8bae\u6539\u4e3a\u8010\u7528\u578b\u8d44\u4ea7\uff09\u9000\u5e93\u3002</p> <p>\u5de5\u5355\u7531\u8be5\u90e8\u95e8\u7684\u76f4\u63a5\u8d44\u4ea7\u7ba1\u7406\u5458\u5ba1\u6279\uff08\u5f3a\u63d0\u9192\uff09\uff0c\u6216\u8005\u66f4\u9ad8\u7684\u8d44\u4ea7\u7ba1\u7406\u5458\u5ba1\u6279\uff08\u5f31\u63d0\u9192\uff09\u3002</p> <p>\u5de5\u5355\u989d\u5916\u5305\u542b\uff1a\u5bf9\u5e94\u7684\u7533\u8bf7\u5de5\u5355\u3002</p> <p>\u5de5\u5355\u7684\u72b6\u6001\uff1a\u5f85\u5ba1\u6279\uff0c\u5df2\u540c\u610f\uff0c\u5df2\u62d2\u7edd\u3002</p>"},{"location":"requirement/ticket/#api_1","title":"\u9000\u5e93\u5de5\u5355\u76f8\u5173API","text":"<p><code>class ReturnTicket</code></p> <p>\u521b\u5efa\u9000\u5e93\uff0c\u7ed9\u5b9a\u5bf9\u5e94\u7684\u7533\u8bf7\u5de5\u5355\u7684uuid\u548c\u9644\u52a0\u4fe1\u606f\u3002</p> <p>\u5ba1\u6838\uff08\u540c\u610f/\u62d2\u7edd\uff09\u5de5\u5355\uff0c\u7ed9\u5b9a\u5ba1\u6279\u4eba\u548c\u9644\u52a0\u4fe1\u606f\u3002</p> <p>\u641c\u7d22\u5de5\u5355\u3002\uff08\u5305\u542b\u67e5\u770b\u6211\u7684\u5f85\u529e\u4e8b\u9879\uff1bpaginator, filter\uff09</p> <p>\u67e5\u770b\u5355\u4e2a\u5de5\u5355\u3002</p>"},{"location":"requirement/ticket/#_13","title":"\u8d44\u4ea7\u7ef4\u4fdd","text":"<p>TODO</p>"},{"location":"requirement/usecase/","title":"\u7528\u4f8b\u56fe","text":""},{"location":"requirement/usecase/#_1","title":"\u7528\u4f8b\u56fe","text":""},{"location":"requirement/usecase/#_2","title":"\u8d85\u7ea7\u7ba1\u7406\u5458","text":""},{"location":"requirement/usecase/#_3","title":"\u7cfb\u7edf\u7ba1\u7406\u5458","text":""},{"location":"requirement/usecase/#_4","title":"\u8d44\u4ea7\u7ba1\u7406\u5458","text":""},{"location":"requirement/usecase/#_5","title":"\u666e\u901a\u5458\u5de5","text":""}]}